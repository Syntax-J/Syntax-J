<!DOCTYPE html>
<html>
<head>
	<title></title>
	<style>
	*{
		margin: 0;
		padding: 0;
	}
		#canvas{
			display: block;
			border:1px solid black;
			margin:100px auto;
		}
	</style>
</head>
<body>
<canvas id="canvas" width="750" height="750">Canvas's Error</canvas>
<script>
//init
	var canvas=document.getElementById('canvas');
	var ctx=canvas.getContext('2d');
	var snake=[{x:10,y:9},{x:10,y:8}];
	var dirct=40;
	var food=null;
	ctx.shadowBlur=20;
	ctx.shadowColor="black";
//draw
	function draw() {
		if (food) {
			if ((dirct==40&&snake[0].x==food.x&&snake[0].y+1==food.y)
				||(dirct==38&&snake[0].x==food.x&&snake[0].y-1==food.y)
				 ||(dirct==37&&snake[0].x-1==food.x&&snake[0].y==food.y) 
				  ||(dirct==39&&snake[0].x+1==food.x&&snake[0].y==food.y)) {
						snake.unshift(food);
						food=null;
			}
		}
		snake.unshift(snake.pop());
		switch(dirct) {
			case 37:
				snake[0].y=snake[1].y;
				snake[0].x=snake[1].x-1;
				break;
			case 38:
				snake[0].x=snake[1].x;
				snake[0].y=snake[1].y-1;
				break;
			case 39:
				snake[0].y=snake[1].y;
				snake[0].x=snake[1].x+1;
				break;
			case 40:
				snake[0].x=snake[1].x;
				snake[0].y=snake[1].y+1;
				break;
		}
		ctx.clearRect(0,0,750,750);
		for (var i = 0; i< snake.length; i++) {
			ctx.fillRect(snake[i].x*10,snake[i].y*10,10,10);
		}
		if (food==null) {
			food = {
				y:(Math.random()*75 >>>0),
				x:(Math.random()*75 >>>0)
			};
		}
		if (food) {
			ctx.fillRect(food.x*10,food.y*10,10,10);
		}
//lose
		if ((dirct==40&&snake[0].y>=75)
			||(dirct==38&&snake[0].y<0)
			 ||(dirct==37&&snake[0].x<0)
			  ||(dirct==39&&snake[0].x>=75)) { 
			alert("sorry you lose");
			location.reload();
		}
		for (var i = 1; i< snake.length; i++) {
			if (snake[0].x==snake[i].x&&snake[0].y==snake[i].y) { 
					alert("sorry you lose");
					location.reload();
			}
		}
	}
	setInterval(draw,50);
//keyboard
	document.onkeyup=function(event){
		if (event.keyCode>=37 && event.keyCode<=40 && Math.abs(event.keyCode-dirct)!=2) {
			dirct=event.keyCode;
		}
	}
</script>
</body>
</html>